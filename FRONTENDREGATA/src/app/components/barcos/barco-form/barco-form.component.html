<div class="barco-form">
  <div class="header">
    <h2>{{ isEditMode() ? 'Editar Barco' : 'Crear Nuevo Barco' }}</h2>
  </div>

  @if (loading()) {
    <div class="loading">Cargando datos...</div>
  }

  @if (error()) {
    <div class="error">{{ error() }}</div>
  }

  @if (!loading()) {
    <form (ngSubmit)="saveBarco()" #barcoForm="ngForm">
      <div class="form-group">
        <label for="alias">Alias del Barco *</label>
        <input 
          type="text" 
          id="alias"
          name="alias"
          #alias="ngModel"
          [(ngModel)]="barco().alias"
          required
          minlength="2"
          maxlength="50"
          class="form-control"
          placeholder="Ingresa el alias del barco">
        @if (alias.invalid && alias.touched) {
          <div class="field-error">El alias debe tener entre 2 y 50 caracteres y no puede estar vac√≠o</div>
        }
      </div>

      <div class="form-group">
        <label for="usuarioId">Usuario *</label>
        <select 
          id="usuarioId"
          name="usuarioId"
          #usuarioId="ngModel"
          [(ngModel)]="barco().usuarioId"
          required
          class="form-control">
          <option value="">Selecciona un usuario</option>
          @for (usuario of usuarios(); track usuario.idUsuario) {
            <option [value]="usuario.idUsuario">{{ usuario.nombre }} ({{ usuario.email }})</option>
          }
        </select>
        @if (usuarioId.invalid && usuarioId.touched) {
          <div class="field-error">Debe seleccionar un usuario</div>
        }
      </div>

      <div class="form-group">
        <label for="modeloId">Modelo *</label>
        <select 
          id="modeloId"
          name="modeloId"
          #modeloId="ngModel"
          [(ngModel)]="barco().modeloId"
          required
          class="form-control">
          <option value="">Selecciona un modelo</option>
          @for (modelo of modelos(); track modelo.idModelo) {
            <option [value]="modelo.idModelo">{{ modelo.nombre }}</option>
          }
        </select>
        @if (modeloId.invalid && modeloId.touched) {
          <div class="field-error">Debe seleccionar un modelo</div>
        }
      </div>

      <div class="form-actions">
        <button 
          type="button" 
          class="btn btn-secondary"
          (click)="barcoForm.resetForm()">
          Limpiar
        </button>
        <button 
          type="submit" 
          class="btn btn-primary"
          [disabled]="saving() || barcoForm.invalid">
          @if (saving()) {
            Guardando...
          } @else {
            {{ isEditMode() ? 'Actualizar' : 'Crear' }} Barco
          }
        </button>
      </div>
    </form>
  }
</div>